<%= render 'shared/header' %>

<div class='container mt-20 mx-auto'>
  <div class="flex flex-col mx-auto w-5/6 bg-white p-6 text-xs sm:text-base text-gray-600 rounded shadow-2xl">
    <div class='text-center text-sm sm:text-base font-bold my-8'>
      <%= "##{@tag.tag_name}" %> のタグの投稿
      <%= "#{@posts.count}件" %>
    </div>
      <div class='grid grid-cols-1 sm:grid-cols-3 gap-5'>
      <% @posts.each do |post| %>
        <div class='bg-white py-4 px-6 rounded shadow-md'>
          <%= link_to post do %>
            <span class='flex text-sm'><%= time_ago_in_words(post.created_at) %>前</span>
            <%= image_tag post.image.url(:small), class: "rounded mx-auto" %>
            <span class='inline-block text-lg mt-2'><%= post.title %></span>
            <div id="likes_buttons_<%= post.id %>">
            <%= render partial: 'likes/like', locals: { post: post } %>
            </div>
            <% if post.user.avatar? %>
              <div><%= image_tag post.user.avatar.url, id: 'preview', class: 'h-10 w-10 shadow-xl transition duration-200 ease-in-out rounded-full cursor-pointer hover:opacity-70' %></div>
            <% else %>
              <div><%= image_tag '/assets/default.png', id: 'preview', alt: 'ユーザーアイコン', class: 'h-10 w-10 shadow-xl transition duration-200 ease-in-out rounded-full cursor-pointer hover:opacity-70' %></div>
            <% end %>
          <% end %>
        </div>
      <% end %>
      </div>
  </div>
</div>
